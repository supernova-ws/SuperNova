todo.actual.txt
===============

[*] Покупка ММ - 15% бонус. Округлять вверх до тысяч

[*] Закладки
Отдельные иконки на "Заметки", "Закладки" и "Полётные задания"
- Так же отдельные вкладки "Все" + см. выше

[*] Модули
- Поле autoinit - для автоматической инициализации модуля
- Для упрощения работы суб-модулей - которые будут иницилизироваться самими модулями
- Например - Highspot и HighspotAction инициализируются в Festival, который грузится в core_festival


$supernova->design -> classSupernova::$design;

payment_currency_exchange_mm_ -> get_mm_cost();

payment_currency_exchange_ - проверить на MM

ВООБЩЕ ИЗБАВИТЬСЯ ОТ $config! Все данные должны вытаскиваться соответствующими функциями!

getElementById - убрать

[*] icon-info - просмотреть, поменять icon-info-1

[*] Планета/Управление
- Вице-губернатор
- Трансфер губернатора
- Сделать "управление" и "возврат" ссылками

[*] Строительство
- Отфлекбоксить блок информации о юните на странице построек и переделать на шаблоны

[*] В Опере12 длинные страницы при скролле до конца вниз норовят вспрыгнуть вверх - проверить почему

Экспы - в зависимости от левела давать летать дальше. В зависимости от дальности - увеличивать риск и награду


Хайспоты - межсерверные хайспоты

!!!!!!!!! Поменять назад константы во флаинг_флит_хандлер

В списке игроков печатать ИМЯ АККАУНТА - для начисления ММ



Changelog
=========

units_used - хранить в NULL ячейке

МАСШТАБИРОВАНИЕ ИВЕНТОВ ОТ СРЕДНЕСУТОЧНОГО ОНЛАЙНА!

Фиксировать вид картинки между рефрешами - т.е. записывать имя картинки

ФИЛЬТР "УДАЧЛИВЫХ" игроков

НЕ ВЫДАВАТЬ КАРТИНКУ, ЕСЛИ РАЗМЕР ЭКРАНА - МЕНЬШЕ МИНИМУМА!


core_festival->mvc_proxy вызывается дважды для ('view', '') - посмотреть, в чём там дело


onhover или онклик - посмотреть полную картинку

В 6 раз больше
1782*6 = 10692


МАСШТАБИРОВАНИЕ ПРИЗА НА ПАЗЗЛ ОТ КОЛИЧЕСТВА ЁЛОЧЕК!

Осада - удержание наоборот. Враждебный флот ставится на орбиту и мешает приходящим-уходящим флотам

На плашке "Наука" показывать процент обязательных исследований
- Строить дерево один раз после ресета и запоминать куда-нибудь

fleet_array
{{fleets }}
{{iraks}}
tpl_parse_fleet_db - унифицировать окружающий код при вызове


db_normalize_id - REMOVE!

Флоты в полёте - фильтр по планете прибытия/отправления


classSupernova::db_get_record_list - внести обратно в функции, не использовать напрямую!

Изолировать aks
fleet_aks_invite (page4) - выставить список игроков-друзей и соаловцев


Проверить систему работы проверки версии сервера


Преобразование чисел с нулями через intval/floatval - если число начинается с 0 или 0х - оно будет преобразовано как восьмеричное/шестнадцетиричное
Особенно неприятно это в яваскрипте - проверить


При отправке флота добавить сортировку по расходу и ёмкости трюма

Перевод ресов между планетами - 0.8% от суммы перевода в ТМ. Типа - вебмани, кошельки WMD, WMC, WMM

ФлитПейдж0 - сделать общую информацию о флоте флексбоксом



[22.01.2016 23:50:12] 	Сингулярность[БАС]>	Еще надо добавить цветовое кодирование по скорости корабля - и вообще будет зашибись
[22.01.2016 23:50:27] 	Сингулярность[БАС]>	Вот сейчас всем удобнее - но вот я теряюсь, когда пытался подобрать корбали в экспу по скорости
[22.01.2016 23:50:39] 	Иван[Феникс]>	(Сингулярность[БАС]) разрабу не понравилось творение. ..... хотя мож привыкнем
[22.01.2016 23:51:24] 	Сингулярность[БАС]>	Где я сказал, что "не понравилось"?
[22.01.2016 23:52:00] 	Сингулярность[БАС]>	По большему количеству критериев новый интерфейс - удобнее. Единственный минус - теряется видение скорости кораблей и подбора по скорости во флот
[22.01.2016 23:53:01] 	Сингулярность[БАС]>	В принципе - понятно, что сделать. Заменить надписи иконками и прописать цветовое кодирование для скорости. И сразу попустит


PTE тест - Доделать
- Блоки
- Условные структруры


BONUS_ABILITY - deprecated ???

На новых наградах 8 марта-2016 не отображается надписи

инфа для размышления. добавить страницу заказа модулей в админку публичной версии игры



init.php@241 // TODO - костыль, что бы работали старые модули. Убрать!


Альтернативный next для туториала - если не установлен модуль (?)
Позволять писать премодеренные новости игрокам (за карму? за ТМ?)


Апдейтер - полностью сбрасывать кэш после обновления
userOptions - get() должен возвращать значение по умолчанию если нет значения в БД

doquery()
- убрать параметр table и посортировать по типам вызова
- переписать на DbQuery

AccessorsV2
- добавить возможность мерджить пачку аццессоров - как массивом так и из другого AccessorsV2

Заменить
- htmlentities($text, ENT_COMPAT, 'UTF-8');
- Заменить nl2br хелпером ?

Мигрировать опции
$options = sys_user_options_pack($user);

Убрать classSupernova::$db_prefix и classConfig::db_prefix и сделать protected db::db_prefix

Обучение
+ Продолжение туториала - добавление нового текста после окончания
+ Проверить добавление новой записи
+ Новая запись не должна открывать следующий текст
+ Ресет - сбрасывать финишед
+ Локализация кнопок и надписей - доделать в JS
+ Парсинг bbCode
Окно
+ Хранить настройки интерфейса - окно, позиция - в куках
+ Не меняется хеадер
+ Окно перекрывается результатами голосования в голосовалке (?!) - проблемы с z-index?
- Закрывается по Esc - отключить
- Менять размер окна ????
+ Код
+ public function htmlize($result, $jsSafe = false) { -> перенести в Text\TextEntity/Text\TextModel
+ Сделать перетаскивание на мобилках
- Сделать мигание глазами у советника
- Загнать настройки туториала в JS объект
- Базовое обучение
- Сделать кнопку "Закрыть" рабочей как-то по-другому


display()
- Поубирать параметры из процедуры - использовать темплейтовые переменные



- проверить начисление статуса "бессмертный"
    - Статус Бессмертного у тебя есть - просто звезды нету

Добавить в релиз
case ADM_TOOL_FORCE_ALL:
classSupernova::$config->db_saveItem('db_version', 37);


jQueryUI https://jqueryui.com/download/#!version=1.12.1&components=111111111111101011011101010010110000000000000000
http://jqueryui.com/download/#!version=1.11.4&components=1111101011010111010110000000000000000&zThemeParams=5d00000100e105000000000000003d8888d844329a8dfe02723de3e5701db9777083d4196cdf2e05cb978ae1580fa707593b54f9fa4872d22569ccccc82e2c2cdd85acf9679c8ad3251f01fea6685b5f8aea5ad2ddab3da975e5144ce275b688fe0a64167e7a2d21024b7f1f458ff6a48bf95e55fdc5bd887a91e8cbb37e0660da11fd2094ccae6bc54c98e52d552c92378136f82c5ba2a6e53fe9fce674ba617ff41e5ec8e32578838b23fc8cb8222c7ec8b787c68d9fe33c907d0e639559740a1265d5bd42493bc8730c59825b1166b5bd0c9a2e37fdd3049cedb6e4cede8edc70921014560433bd45d7a5b752579d27044cb984d5c17d5a3b444194304032b03e854284f39ccecc06daa5a2b4478ff730484ae0454a7d3d6bc5624ecc4f9a1234d98c89f346052e06c3f8d59ff0286613c38d746f5477fb2d120006d250174991366691d2cf8b8c1fba17b31c12339d492eaa7c948687edf4436abf9644fc98fdb0c811d60a50af0a1cd0561044a51198ab80e144d7f19fb5fc81fb6d332d001f08c78ec16a45d6e36cedbf096b742ef7f6d4c02c7009044519998202183a8fb57608dc92b7e71857163dbd5498fdd44f6e


Компиляция веб-ресурсов на сервере
- Компилировать все зарегестрированные CSS в один файл
- Комплировать все зарегестрированные js в один файл

Настройки
- Разобраться, почему не работают ссылки второго уровня
- Разобраться, почему не выделяются табы


Навбар
+ Свернуть очереди - унифицировать и вынести их в отдельный файл


Ресурс-бар
+ Переделать
+ Flex
+ Тесты
+ Вертикальный
+ Горизонтальный
+ В Альянсе
+ Адаптивный дизайн
+ Попап
+ Разделители тысяч
+ Заменить буквы-маркеры на картинки
+ Раскидать стили и JS-код по файлам из темплейта
+ Возможно, разбить на две части - МК-ДЭ, что бы красивее врапалось на маленьких экранах
+ Сделать опцию включения нового навбара в Настройках
? Прогрессбар заполнения
- Отдельный таймер изменения заполнения
Попап:
- Отдельный для энергии
- Цветовое кодирование заполнения - зел-жел-оранж-крас
? Добавить летящие флоты
? Перенести опции настройки в куки
- Проверить как работает на мобилках
+ Добавить склады
? Иконка склада


Обучение
- добавить выделение цветом в текст - ссылки, кнопки итд

Экстратеха
- См.

Убрать из списка кораблей те, что нельзя строить по расовым ограничениям


? Заменить ainput на спиннеры

- Сделать страницу подобора цветов под тему
    - Включить её для игроков - сохранять в настройках


Постройки
- Инфа о производстве - сжираются пустые колонки - там где 0


Обслуживание
- Удалять кумулятивы (32) с нулевыми данными
- Удалять кумулятивы удалённых игроков
- Сделать FOREIGN KEY

Архивация аккаунтов


Навбар
? может добавить флекса и при вертикальном ресурсбаре?

Подтверждение автоконвертации
- Переделать попап под стандартный конфирейшн диалог


Поставить что-нибудь с реквайр лаб-левел 1, что бы игроки сразу могли че-то исследовать

[*] prettyNumberStyledDefault() - избавиться и перенести формат на сторону темплейта
[*] HelperString::numberFloorAndFormat() - избавиться и перенести формат на сторону темплейта


JS/CSS
- В постройках - вынести загрузку JS-файла в PHP
- Сделать автоматическое определение наличие min-файлов
$sn_mvc['javascript']
$sn_mvc['css']


#test {
z-index: 0;
color: red
}

.class_test {
color: white;
width: 40%;
position: absolute;
right: 0;
border: 1px solid red;
background-color: rgba(0,255,0,0.5);

z-index: -1;
}

$(document).ready(
function() {
$('#test').append("<span class='class_test'>Q</span>");
}
);

autoexpanded textarea
http://codepen.io/vsync/pen/frudD


- Таки унифицировать опции
  - $options = sys_user_options_unpack($user);



- Обзор планеты
    - сделать уникальные глобальные счётчики по классам - одновременно обновлять данные в нескольких элементах, а не по ИД


- Плохо нажимается кнопко постройки в Опере

- ИЕ11
  Не работает адаптивный навбар от слова "совсем"

- Проверить работу модуля menu_customize с новой вёрсткой

- Переделать управление альянсом на табы

дубликаты assign_recursive - поубирать

- Больше тестов богу тестов!
    - Проверить работу _inherit в скинах

История чата - добавить нормальную паджинацию

MENU => GLOBAL_DISPLAY_MENU
NAVBAR => GLOBAL_DISPLAY_NAVBAR
Работа PAGE_TITLE и PAGE_HEADER

- Вертикальный навбар
    - Переключение темплейтов
        - Фоллбэки, если темплейта нет
        - Инхеритед-темлпейты
            - Фоллбэки, если нет файла темплейта
        - Опция в Настройках
            - Добавить в таблицу user поле для имени темплейта
    - В таблице user - переименовать dpath
        - Сделать хранение только имени скина, а не пути к скину

- Автоматический выбор ближайшей фаланги

- За ТМ - сохрнение результатов скана фаланги и показ их в попапе

Упростить вот это вот всё
public function getImageCurrent($image_tag, $template = null) {
return $this->getImageFrom($this->activeSkin->getName(), $image_tag, $template);
}

public function getImageFrom($skinName, $image_tag, $template) {
return $this->getSkin($skinName)->imageFromStringTag($image_tag, $template);
}
$skin = $this->model->getSkin($params[self::PARAM_SKIN]);
$image_string = $skin->imageFromStringTag($ptlTag->resolved, $ptlTag->template);

Убрать
navbar_v
Упростить вёрстку


Император
- сделать выбор и настройку выводить статистику за Х дней
- Для себя
- Для других
- Вертикальная статистика


Tools::fillPercentStyle
- сделать аналог для JS
- сделать аналог для TPL
- Позаменять везде самопал на этот код

Global message! aka notifications

Техи:
- Общая технология Супертеха (бустер?)
- Позволяет добавить к одной выбранной технологии количество левелов супертехи
- Рассовая абилка Экстратеха
- Как экстратеха - только к разным?
- Артефакт на +к технологии
- Временный ?
- Патч?

pretty_number
- Растащить на функции, а то слишком много в одном месте

Инфу по ТЭ - в новапедию

[01.03.2017 16:28:30] 	AyaaN[SPIRIT]>	Блин
[01.03.2017 16:28:39] 	AyaaN[SPIRIT]>	Впервые строю термо
[01.03.2017 16:29:00] 	AyaaN[SPIRIT]>	Потому что СолЭс работают в минус
[01.03.2017 16:29:14] 	AyaaN[SPIRIT]>	15 лвл
[01.03.2017 16:29:33] 	AyaaN[SPIRIT]>	СолЭс а энергии наоборот -374
[01.03.2017 16:29:52] 	Сингулярность[БАС]>	(AyaaN[SPIRIT])Забавно
[01.03.2017 16:30:01] 	Сингулярность[БАС]>	В принципе - так и должно быть, но вижу какое-то кидалово
[01.03.2017 16:30:04] 	Сингулярность[БАС]>	Какая планета?


Позаменять global:
- $debug
- $lang
- $config
- $user (!)


Расшить работу с чейнджсетами
static::db_changeset_apply();





Use DbQuery:
public static function db_ins_record($location_type, $set) {
public static function db_del_record_by_id($location_type, $safe_record_id)
public static function db_del_record_list($location_type, $condition)


Quest
- quest_conditions - в отдельную таблицу
- мультикондишн
- Фильтр квестов

События

function doquery($query, $table = '', $fetch = false, $skip_query_check = false) {
=> doqueryNew - без $table


Туториал - свернуть/развернуть

Найти аналогичные куски и оформить отдельным кодом
foreach ($lang['qst_status_list'] as $statusId => $statusName) {
$template->assign_block_vars('status', array(
'ID' => $statusId,
'NAME' => $statusName,
));
}


Альянсы:
- История названий и тэгов Альянса а-ля история имён

JS:
- parseInt => parseInt(x, 10)
- Или вообще - Math.intVal


Платежи
- Кнопка "очистить незавершенные старше 2 месяцев"
- Показывать платежи по дефолту только за последние 2 месяца
- Кнопка "Показать все платежи"
- При клике на иконку платежа - делать письмо по шаблону
- Уменьшить точность суммы до двух цифр
- Добавить форматирование количества ММ и сумм


+ Сделать интерфейс для подарков на 8е марта
    + Кавалер
        - JS-код, если не хватает ММ
        + Место в конкурсе
        - Галочка disclosure:
            - По умолчанию - не пишется имя дарившего
            - Если стоит галочка - имя пишется
    + Дама
        + Список входящих подарков
        - Королева Весны
    - Оно
        - Ссылка на "Настройки", профиль
    - Письмо о подарке
        - Сумма и кто подарил, если стоит disclosure
    - Выдача ПЗ сразу по факту подарка
    - Обсчёт и выдача результатов конкурса

Рекорды:
- Рекордсменам давать какие-нибудь бонусы

Настройки:
- Ужать темплейт - переделать на блоки
- Убрать старый опции, которые хранятся в таблице `users`

Ранняя загрузка
- Для включения - выставить $sn_mvc['pages'][<имя страницы>][PAGE_OPTION_EARLY_HEADER] в true;
- Сделать возможность быть каллабле - анализировать строки запросов и отключать там, где нинада
- Например, где оно может быть редиректом или вывод другого header
- Такие случаи конечны и легко просчитываются
- $sn_mvc['pages'][<имя страницы>][PAGE_OPTION_TITLE]
- Поддержка $lang в содержимом
- Грузить языки заранее - тоже через $sn_mvc
- Тайтл можно менять после вывода страницы через JS!


Предупреждение при возврате флота на удалённую планету (!)
- Подтверждение удаление планеты на которую летит / возвращается СВОЙ флот


Сделать в игре рекламу ФИЧ ИГРЫ!

На странице квестов написать, что награды начисляются автоматически.

Отключать донаторам рекламу

Запихнут иконки меню в один файл
Сделать настройки отображения displaymenu итд свойствами страниц - тогда можно будет выводить раньше хидер

В мобильном виде
- вместо ввода чисел (ainput в частности) делать по тапу/клику попап, в котором отдельные элементы ввода - типа спин-бокса или даже тот же аинпут

Опция:
- Обновление страницы по окончании очереди


ELO


Пакетные функции должны быть вынесены из Энтитей в модели, например (?) - типа, получение списка итд
- А вот работа над данными энтити должны быть в самих энтити


Вернуть сообщения о получении уровня и начислении ТМ

Биржа:
- Обмен ресурсов
- Фиксированный курс
- Плавающий курс

Статистика
- Убрать ТМ и ММ из расчёта рейтинга ?


Сделать classSupernova контейнером Pimple саму по себе

https://tech.yandex.ru/money/doc/dg/reference/notification-p2p-incoming-docpage/
https://money.yandex.ru/embed/quickpay/small.xml

Курс белорусского рубля к доллару: 2 бр за 1 усд


- Админка, стата - не считать ботов!

- Глобальные сообщения (player_notifications)
    - Фаза 0:
        - Таблица в БД
        - Автоочистка таблицы по обслуживанию
        - Вывод сообщений:
            - Тикер на каждой странице
                - Кнопка на закрытие
            - Lastread
            - Страница для просмотра всех сообщений
        - ГС:
            - Покупка ММ
            - Увеличение уровня
                - Здания
                - Рейд
                - Теха
                - Экспа
    - Фаза Х:
        - Поддержка BBcode
        - ГС на квесты
            - Ссылка на квест, к которому имеет отношение ГС
              ? ГС на новости?

[*] ? Дописать начисление ТМ
- Начисление по имени ID/имени/емейлу АККАУНТА, а не игрока

[*] Переписать начисление ММ
- Вытаскивать имя/ИД игрока если ММ меняется по аккаунту, а не по игроку
- Расчёт ММ по валюте
- Отсылка письма с уведомлением

[*] core_auth.php:437
$account_translate = PlayerToAccountTranslate::db_translate_get_account_by_user_id($user_selected['id'], self::$main_provider->provider_id);
replace with
Account::dbGetByPlayerId($player_id_unsafe)



[*] Релиз 43:
- PHP 5.4 + PHP 7 compatibility
- Убрать патчи по 39й включительно
- Интегрировать модули GIT-сабмодулями


[*] Убрать global
- global $ListCensure;
- $ListCensure = array ( '/</', '/>/', '/script/i', '/doquery/i', '/http/i', '/javascript/i');


[*] class OldDbChangeSet
- deprecate

[*] FleetLock - блокировать в МЛФ записи в зависимости от типа ивента - отдельно по прибытию, удержанию, возвращению
[*] protected function flt_flyingFleetsSort($a, $b) - Переписать на более чёткую сортировку по ивентам
- Из двух флотов первее обратаывается события флота с меньшим ID
- FLEET_ARRIVE всегда наступает первым
- За ним - FLEET_ACOMPLISH
- И только за тем - FLEET_RETURN

[*] // init constants from db - TODO - REMOVE

[*] Убрать \phpbb_hook из кода и ссылки на его использование

[*] mrc_get_level - разбить на разные функции:
- unitGetLevelOnUser
- итд

[*] Заменить двойные кавычки одинарными

[*] Проверить все таймлимиты - и использовать константы:
- TIMEOUT_SHORT
- TIMEOUT_MEDIUM
- TIMEOUT_LONG
- или PERIOD ???? - лучше TIMEOUT, что бы не смешивать с остальными периодами

[*] Класс TimeMeasure:
- start($mark)
- mark($mark)
- end
- diff($mark)
- format($mark)

[*] Аккаунт для поисковых пауков


[*] DB:
- `alliance`:
- Убрать поле ally_request_waiting

    global $ally_rights;


[*] ActiveRecord - а нужен ли теперь reload()?
- Теперь перед insert/update устанавливаются дефолтные значения из БД

[*] После окончания update должен редиректить на какую-нибудь страничку - что бы перечитались данные


[*] Кэширование схем БД/таблиц

[*] AR - проверка существования полей в схеме БД

[*] deprecate Invoker class

[*] AccessLogged::_startValues - не нужны?!


[*] ActiveRecordAbstract
- вынести всё, относящееся к работе с DB в отдельные функции
- Унаследовать от этого класса ActiveRecord и перекрыть абстрактные методы
- Написать тесты


[*] Учитывать тип ядер и размер планеты в exploration bonus


[*] Мультики
- Ограничивать передачу ресурсов нижележащим
[21.09.2017 20:29:08] 	rival[NewSTAR]>	вобщем не важно - мульты разрешенные - позволяют задействовать все механизмы прокачек ) выживают самые толстые) Топу мелкого не достать - быстро вкачивается мульт свежий - и имея ресусную базу топа - мультом сносится вся мелочь
[21.09.2017 20:29:34] 	марк рикман[Казаки]>	(rival[NewSTAR]) ну и что в этом плохого?
[21.09.2017 20:30:27] 	марк рикман[Казаки]>	вылез топ вверх. внизу никого достать не может. сваял мульта и игра получает новый импульс. опять же... если топ будет занят только мультом, то его будут лупить и грабить.
[21.09.2017 20:30:30] 	Сингулярность[абиБАС]>	(rival[NewSTAR])Что значит "быстро"? Каким-таким механизмом?
[21.09.2017 20:31:36] 	rival[NewSTAR]>	(Сингулярность[абиБАС]) условно быстро ) а тут вообще мгновенно практически - через рынок флота можно делать) ну да - минус по ресам - зато муха надоедлевая сбита)
- Подумать о пересчёте скорости ресёча в Альянсе в зависимости от уровня игроков - что бы не набирали мелочь
[21.09.2017 20:38:08] 	KAPACb>	2. мультами можно задирать скорость изучения технологий в альянсе
[21.09.2017 20:38:10] 	Сингулярность[абиБАС]>	(KAPACb)То же самое он может сделать союзником/членом Академии
[21.09.2017 20:38:11] 	rival[NewSTAR]>	(Сингулярность[абиБАС]) я говорю чем плохи мульты - своими возможностями - абсолютным совпадением онлайна
[21.09.2017 20:38:32] 	Сингулярность[абиБАС]>	(KAPACb)То же самое можно сделать, набрав ВОТ ВСЕХ в Альянс. Были тут одни, с 70+ членами... Брали всех
[21.09.2017 20:38:36] 	марк рикман[Казаки]>	(KAPACb) это хорошо по твоему мнению, или плохо?
- Разобраться с ботами и ситтерами
[21.09.2017 20:50:09] 	rival[NewSTAR]>	а бывает ещё ситтинг
[21.09.2017 20:50:23] 	rival[NewSTAR]>	тоже боты) только живые
- Разобраться с прокачкой - передачей ресурсов через и-шки
[21.09.2017 21:18:08] 	Сингулярность[абиБАС]>	Прокачку - да, надо закрывать. Примерно понятно - как. Надо еще подумать немного и сделать
- Противопрокачка
- Отключить транспорт на Iшки и i-шки - в общем, когда там прокачка снимается
- Ввести ограничение на транспорт в зависимости от уровня Станции Альянсов - переименовать её, кстате
- Ввести ограничение на принципиальное количество транспорта слабому игроку
- Добавить ресурсы на Удержание (?)
- Удержание только на планете со Станциями - час за уровень станции
- Сбрасывать на планеты без Станций можно только ограниченное количество ресурсов
- Режимы работы станции: всем, только соаловцам, только друзьям, соаловцам и друзьям, никому
- Проверять наличие Склада Альянса в момент установки УД (или во время боя?)
[27.09.2017 14:41:38] 	jeka_ua[™]>	(rival[NewSTAR]) для начала склад альянса везде построй
[27.09.2017 15:20:02] 	rival[NewSTAR]>	(jeka_ua[™]) а зачем тебе склад, если я склад грохнул на одной за 35 минут до прилёта, а ты всё равно повис без склад
- Ограничить передачу ресурсов
- Подумать, как переделать реферралку, что бы куча мультиков не давала особых бонусов
[23.09.2017 06:59:45] 	Morhold[Казаки]>	О, вот еще что. На мультов наверное не должны распространяться реферальные ссылки. Иначе начнут абузить ТМ за первоначальные квесты. Выжал мультика, бросил, завел следующего. И так далее
- Дополнительные ограничения для:
- Играющих через тор-ноды
- Играющих через анонимные проксики
- Играющих с одного пула адресов

[*] Ультрапул - моментальная постройка кораблей

[*] Использование SVG в качестве Placeholder’a https://habrahabr.ru/company/edison/blog/342848/

[*] Ракетный автостроитель - платный, дорогой, временный

[*] Вход по аккаунту
[1:56:29] SNP-A-Morhold: Гор, ты тут?
[1:56:56] SNP-A-Morhold: Так ты же сам писал, когда логинился после переыва, что не мог зайти по емейлу...
У старых игроков логин - это имя игрока (в силу очевидных причин). У новых - емейл.
[1:57:23] Project "SuperNova.WS": И?
[1:57:44] SNP-A-Morhold: Все так. И я стормозил. А чего взять с новичка. Ну он тупой, не прологинился, матернулся и пошел на новый проект
[1:58:30] SNP-A-Morhold: Поэтому я и подумал, не уходят ли лишние игроки из за того, за что я плюху на почту получил :)


[*] Заменить serialize/unserialize на json_encode/json_decode

[*] Разобраться с mail.ru
- http://php.net/manual/en/function.mail.php


[*] Возмещение
- !!! Наверное, всё-таки, юниты - ресы можно передать и так
- Возможность возместить ресурсы на потерянный флот (возместить юниты?)
- Должен иметь ETA что бы не стать эксплоитом
- Запоминаем скользящим окном, сколько стоит флот
- В момент Возмещения - считаем количество ресурсов во флоте (без загрузки)
- Разница может быть Возмещена с коэффициентом и, возможно, за ММ
- Должна действовать нуб-защита - не более /5 от текущего уровня
- ВВЕРХ ВОЗМЕЩАТЬ НЕЛЬЗЯ - ПРОКАЧКА!


[*] EXPLOSIVE ACCELERATORS
https://lurkmore.to/Оружие_в_компьютерных_играх#mws_52JPLKA
EXPLOSIVE ACCELERATORS
http://www.islandone.org/LEOBiblio/SPBI134.HTM


[*] Проверять
- sql_mode = ''
- Права на SET
- Если sql_mode не тот - менять



[*] classConfig->db_loadItem - заменить на конструкцию pass()->переменная
- То же самое с db_saveItem
? А сам pass() переименовать в direct()


[*] /includes/template.php 323
Use $template_result to turn menu and navbar or ond off instead of
- isset($page->_rootref['MENU']) ? $isDisplayMenu = $page->_rootref['MENU'] : false;
- isset($page->_rootref['NAVBAR']) ? $isDisplayTopNav = $page->_rootref['NAVBAR'] : false;


[*] Поощрилка за регулярную игру
- Буст настарте новичку

[*] Собрать статистику по потреблению памяти игрой:
- PHP
- xCache
- MySQL

[*] Ускорять исследования в зависимости от постоянности состава Альянса и срока его существования (?)


#ctv

[*] Логгировать "Прибытие" как самую длинную операцию флота. В файл?

[?] Не работает нормально "Обслуживание" - не возвращает результат

[*] Стата
- Если пересчёт происходит повторно - т.е. ДО того как посчитается новая стата:
- то надо постить данные как новую стату и затем при следующем пересчётё заменять эти данные
- Так не будет лишних "шагов" статы при внеплановых пересчётах
- В админке не показывается результат расчёта статистики

[*] Отключить пока лысого
- Проанализировать стату
- Сделать отключение по красному крестику


[*] При расчёте статы не лочить всё сразу - или не держать лок так долго


[*] ActiveRecordAbstract - разбить на два-три класса


[*] scheduler_process - sys_maintenance подвесить выше для того, что бы удалять лишние Альянсы/юниты ДО расчётов


[*] Экспа
- Искать чертежи по кусочкам. По 10к на кусочек

[*] Наёмники - цена для Альянсов должна быть выше кратно


[*] template - модификаторы показа через параметры {VALUE|parms...}, что бы не надо было везде дублировать через pretty_number


[*] Империя
Добавить еще кнопок в начале для "сохранить", если ОЧЕНЬ много планет/лун



[*] !!!! Логгировать изменения емейлов!



[*] Листание сообщений (?)

[*] Шпионаж - генерировать отчёты не в форме текста



Скорость - на самом деле не скорость, а ускорение - сектора/секунду^2

[*] Дейтреедобывающий корабль с отрицательным потреблением
Звездный ковш (?)


#ctv



[*] Добавить точки - разделители тысяч.
- Про экран симулятора я подумаю основательно. В строке ввода может и не получится красиво сделать -
но вот, например, можно добавить прямо под строкой ввода отдельно добавить еще и введённое количество,
наверное, можно

[*] Сообщения
- Редирект после удаления - что бы при рефреше не повторилась операция
- Рефакторинг
- Пейджинация - учесть, что при удалении "неотмеченных" на странице NOT IN должны инвертировать выбор и давать конкретные ИД
- messageLastRead - тотал и по категориям
- Использование DBQuery - переписать куски
- Полноценный Outbox с копиями сообщений
- Унифицировать рендеринг сообщений
- (?) Архивная папка - даже отдельная архивная таблица (?)
- "Чёрный список" у игроков - фильтрация адресатов
- (после "черного списка") Пересылка сообщений - форвард. В частности - шпионских отчётов

#ctv

OldDbChangeSet - избавиться

ActiveRecord не транслирует ID-поле в $this->id - и тесты этого не ловят!
- ActiveRecordAbstract надо разбивать на подклассы
- В следующем классе должны быть операции с ID и методы DELETE, UPDATE, findById
- Проверить все унаследованные от ActiveRecordAbstract классы - что бы они по-прежнему работали корректно
- И тесты

ActiveRecordAbstract
- Вынести вниз функционал пересчёта имён полей в названия свойств



Перейти на новый ResourceCalculator
Закомментировать
$planet_row['caps'] = $caps;


Разобраться с освобождением результатов mysqli_result->free()


Проверить работу с ключом устройства - нет ли там эксплойта

Меню админа - убрать дубликаты категории/пункты - "Игроки"/"Список игроков"

- Поддержка апдейтеров в модулях - что бы не менять update.php в ветках


Собирать статистику по страницам
Удалять в маинтенансе старые визиты ?
- После того, как данные о подозрительных пользователях перенесены в отдельную таблицу
- Отдельный модуль "антибот"
- Оптимизация
    - не писать ничего если toDelete у нас пустой

$debug - зацикливается, если ошибка произошла в БД - пытается записать опять в БД, в которой ошибка итд


Полные исходные логи счётчика - в бэкапе от 2017-10-18 13:31

Проверить работу cutTails = true в VisitMerger

Вести историю мьютов
При бане/мьюте - выдавать историю банов и мьютов

- ТАКИ НЕТ -    Теперь корректно обрабатываются визиты, находящиеся на стыке пакетов

- Сделать ОТДЕЛЬНЫЙ индикатор ресурсов для Альянса - что бы было видно, сколько ресов у игрока
- ВЕЗДЕ включить индикатор ресурсов - проверить, где это реально не нужно

- https://webdevwonders.com/dom-storage-super-cookie/
  // Set a session_id if sessionStorage object is available
  if (window.sessionStorage) {
  var session_id = "2bf039d0-f0c1-11df-ae7e-3137382e3633";
  window.sessionStorage.setItem("session_id", session_id);
  }
  // Try to retrieve the user_id if localStorage object is available
  // or set a new user_id if user_id isn't set yet
  if (window.localStorage) {
  var user_id = window.localStorage.getItem("user_id");
  if (!user_id) {
  user_id = "6b67ce02-c61e-11df-96b2-38352e313833";
  window.localStorage.setItem("user_id", user_id);
  }
  }


- ТМ - из экспы только супертяжами

Экспу - в бинарные логи


Рассылка Альянса - одним письмом


Illegal mix of collations (latin1_bin,IMPLICIT) and (utf8_general_ci,COERCIBLE) for operation '='
/* tID 6
(db_mysql)db_mysql->doquery() - 'includes/db.php' Line 102
doquery() - 'classes/RequestInfo.php' Line 94
(RequestInfo)RequestInfo->__construct() - 'classes/core_auth.php' Line 183
(core_auth)core_auth->__construct() - 'includes/init.php' Line 108
include() - 'login.php' Line 16
*/ SELECT `device_id` FROM beta_security_device WHERE `device_cypher` = '1\0



Ёмкость хранилища:
$levelPremium = $level + $premium
$base = function($levelPremium)

applyBonus($base, MRC_STOCKMAN)
*= $storageScaling

bonusData - описание бонуса, в хранилище $bonusDataList[snid]

MySQL Views:
- game_v_counter
select `c`.`visit_time` AS `visit_time`,(`c`.`visit_time` + interval `c`.`visit_length` second) AS `end`,round((((`c`.`visit_length` / 60) / 60) / 24),2) AS `day`,round(((`c`.`visit_length` / 60) / 60),1) AS `hour`,round((`c`.`visit_length` / 60),1) AS `min`,`c`.`visit_length` AS `sec`,`c`.`hits` AS `hits`,`c`.`device_id` AS `device_id`,`c`.`browser_id` AS `browser_id`,inet_ntoa(`c`.`user_ip`) AS `IP`,`c`.`user_id` AS `user_id`,`u`.`username` AS `user`,`u`.`ally_tag` AS `ally`,`c`.`counter_id` AS `counter_id`,`c`.`user_ip` AS `user_ip`,`c`.`user_proxy` AS `user_proxy`,`c`.`page_url_id` AS `page_url_id`,`c`.`plain_url_id` AS `plain_url_id` from (`game_counter` `c` left join `game_users` `u` on((`u`.`id` = `c`.`user_id`))) order by `c`.`visit_time`,`c`.`counter_id`
- game_v_users




Производство ресурсов:

Астротехи - на 2017-10-29
Максимум планет - 28, фактический максимум - 23, на что и надо ориентироваться
Максимум астротехи - 22, фактический 20
Максимум астро+прем - 25, фактический - 23 с провалом до 19
MaxLevel Astro = 22(18+4) x 5; 21(17+4) x 6; 20(16+4) x 11; 19 x 14;

Таким образом рассчитываем, что:
28я планетарка с премом +7 и +1 Марс
- 20я планетарка по цене, как сейчас 22я астротеха - 4 трлн
- 21я планетарка по цене - не меньше 23й астротехи - 10 трлн
- вообще-то 22 астротеха дает 18 колоний и 4 экспы

MaxLevel Astro+Prem =
25 x 4
24 x 6
23 x 8
22 x 4
21 x 7
20 x 5
19 x 11
18 x 34
17 x 49

REAL Planets: pcs x players
- 28 x  3   +7 = Артьом 21 + 7, Xeon 22 + 6, 1 старый от Игоря
- 27 x  1   +6 = auro007 22 + 5
- 26 x  0   +5
- 25 x  3   +4 = bak и Dimitrius 21 + 4, 1 старый
- 24 x  6   +3
- 23 x  9   +2
- 22 x 15   +1
- 21 x 13   +0
- 20 x 10
- 19 x 16
- 18 x 25
- 17 x 20
- 16 x 33
- 15 x 52
- 14 x 81
- 13 x 58
- 12 x 76
- 11 x 65
- 10 x 86



[*] Считать среднее время работы статистики и, возможно, флота
- Хранить старое среднее время и общее количество обсчётов, что бы можно было потом обновлять среднее время

[*] Добавить на сервере время замера разницы во времени, что бы можно было форсировать замер времени с сервера

[*] Ежедневно в рамках обновления статы синхронизировать статус с аккаунта на юзера и начислять медальки


Проверить на модулях
- db_get_user_by_username
- db_get_user_by_where
- db_get_record_by_id - количество параметров и сократить
Избавиться от
- _SnCacheInternal::$queries
- И вообще - вынести из classSupernova все явные обращения к конкретным таблицам/сущностям
  classSupernova::db_get_unit_list_by_location

db_unit_by_location()
db_planet_by_id()


Модули - фестиваль - гезер - админка - баннилки
- Глюк - если повторный бан, то банит +24 от старого

Поудалять еще и пустые аккаунты


+ Удалять при подсчётет статы и ТО планеты с просроченной датой удаления - это будут луны
    - Придумать что-то другое, что бы гарантировать удаление, даже если луна не сканируется


Такой конфиг ставит стату раком
var_stat_update	2017-11-11 04:08:30
var_stat_update_admin_forced	2017-11-04 14:31:13
var_stat_update_end	1510453157
var_stat_update_msg	Update in progress. Step 14/14: updating Allys current rank and points.


var_scheduler_active
var_stats_lastUpdated	0
var_stats_schedule	d@04:00:00
var_stat_update	2017-11-11 04:08:50
var_stat_update_admin_forced	2017-11-04 14:36:52
var_stat_update_end	1510452767
var_stat_update_msg	Update in progress. Step 14/14: updating Allys current rank and points.
Memory usage: 3,670,016
Previous operation time: 0.01690
var_stat_update_next	2017-11-12 04:00:00


#ctv


[*] И вообще больше тестов для бонусов


[*] Fleet\MissionExplore
- Надо добавить механизм перекрытия для flt_mission_explore_addon
- Проверить, где перекрывается этот метод - и исправить работу перекрытий по месту
- СЕЙЧАС ПЕРЕКРЫТИЕ flt_mission_explore_addon ОТКЛЮЧЕНО!!
- Новый Наёмник - Экспедитор (?) - позволяет находить корабли других рас в экспе

MissionExplore.php
// TODO - REMOVE!!!!
$flt_stay_hours = 1;

      $this->manifest['functions']['flt_mission_explore_addon'] = 'expedition_result_adjust';


[*] Токен-лотерея
- Написать Ридми
- Ограничивать юниты текущим уровнем игрока
- Админка Токен-лотереи - сделать. Показывать % для каждого айтема
- Показывать окно о получении токена
- Разделители тысяч количеству токенов
- Время получения токена - дату
- Звуки на выигрышь и проигрышь
- Логи:
- Получение токена
- Трата токена
- Получение юнитов

[*] Модули
- Вынести общие функции чтения конфигурации - с пререндерингом префикса


[*] Понять, почему у юзера обнуляется статистика при выходе из алла

[*] Поискать ENT_COMPAT, 'UTF-8 и позаменять на HelperString::htmlSafe()



[*]
- Сделать пул Губернаторов
- Запаковать старых игроков
- Поменять PLANET_GOVERNOR_ID и PLANET_GOVERNOR_LEVEL на использование Planet\Planet


[*] На Обзоре и Управлении добавить цены на смену ядра в дропдауне
- На "Ресурсах" - убирать цену в дропдауне, если ядро равно текущему (?)


[*] prettyNumberStyledDefault - заменить на параметры PTL-тэгов в темплейте: num|format
- HelperString::numberFloorAndFormat

[*] Сделать пересчёт статы без добавления новой позиции

[*] defence -> defense

[*] Проверить, как работает UBE с уничтоженными лунами - и вообще уважаются ли уничтоженные луны?

[*] Унифицировать создание луны:
- заодно увеличить максимальный размер луны до 9999 и переделать sn_ube_combat_analyze_moon_destroy
- Не создавать луну при миссии Уничтожить


[*] [15.02.2018 12:37:28] 	smotreashee[A-Казак]>	что за фигня у меня был шпионаж 23+4 2 из альянса и 2 за премиум я купил шпиона 3 лвл (прем еще+2 к его лвл даёт и того 5 лвл ) но шпионаж так же остался 23+4 должно быть 23+9 где меня обманули ?

[*] TODO - убрать рассовые корабли из добычи Экспедиции

[*] Статистика - сделать ссылками ники
- Возможно - перенести иконки в конец ника

[*] Пираты - на луны
- Пираты будут вылетать на самую жирную планету с ресурсами


[*] Чат
- Избавиться от поля БД `chat_message_sender_name` в модуле чатов - имя можно выковаривать из `user`

[*] Апдейтер
- Переделать хелпер в объект




[*] [!] Игроки/Уровни
- Рендерер ников
? Убрать из player_nick_render_to_html() вызов player_nick_uncompact()
- Переделать рендерер ников в объект
- Сделать список рендереров расширяемым
- Поменять в player_nick_render_current_to_array() строковые идентификаторы опций на константы

[*] Игроки/Ники
- Добавить иконки неактивности - выдернутый джек ethernet или дисконнект

[*] Собрать все иконки в один файл

[*] Впихнуть куда-то количество очков на уровень

[*] Вселенная - неправильно расцвечиваются auth_level 1-2

[*] Переместить "6 лет СН" в памятные знаки (?)

[*] Ник - выравнивать внешним дивом
- chat_nick_msg - поискать и убрать

[safe_name] - переименовать

[*] Хайспот на бесплатные массовые операции
[*] Хайспот на бонус к уровню Премиума - на 12 апреля
[*] Хайспот на свободную постройку расовых юнитов
[*] Карго-Мастер - переделать под увеличение трюмов и ввести нового Наёмника для увеличения складов
[*] Капитаны - убрать пункт меню и сделать интерфейс работы с флотами
- Добавить Капитанов на список юнитов (?) или на экран Управления (?)
- Добавить здание для прокачки Капитанов
- Добавить новые скиллы (?)
- Размер Трюма
- Размер бака (?)
- Скорость полёта (?)

[*] Замена стандартных попапов на jQuery
- Автоконвертация - подтверждение


[*] При удалении планеты - в попапе писать имя планеты и удалять зафиксированную планету
- Возможно, указывать что будет потеряно
- Луна
- Наёмники
- Флот
- Количество зданий
- Капитан (?)

[*] Перенести признак столицы в планету (?)

[*] Оптимизировать рендереры флотов и планет на страницах Империи и Обзора

[*] Выделить уровень "разработчик" в отдельный модуль

[*] {Эта планета является столицей} - добавить список бонусов

[*] Седьмая раса - "дарлоки":
- Расовый корабль (неизвестно) - сверх-лёгкий истребитель, который не светится нигде:
- Ни в сканах
- Ни в списке флотов во время полётов
- Его характеристики неизвестны
- Его нельзя посчитать в симуляторе - его там просто нет
- Специабилка - что-то со шпионажем. Мегабонус?
- Механизм "Диверсии"/"Саботажа"
- Назначать Капитанов (?) на миссию "контр-разведка" - что бы понизить вероятность


[*] Опция "Построить моментально"/Исследовать
- Вычисляется количестов чипов/нанитов и покупается/пременяется за ТМ
- Так же хелперы по АКК на новых планетах


[*] Фильтры по типам планет и лун в Империи и МО
Morhold[Казаки]> Гор, кстати нет в планах возможности фмльтровать планеты и луны в списке и/или в обзоре империи по признаку планета/луна? Тоже было бы очень удобно, часто нет никакого смысла просматривать всю простыню, если нужны только планеты или только луны
Anarchis[SPIRIT]> (Morhold[Казаки]) да согласен, и ещё такоеже разделение в массовых операциях


[*] Добавить в подсказку Лотереи, что можно выиграть еще и Артефакты
[*] Добавить на страницу 8 марта переход в админку - понятно, только для админов

[*] Провезти деноменацию ТМ и ММ


[*] При входе в игру, неважно где - на планете или на луне, появляется активность на всех планетах игрока.
- http://forum.supernova.ws/viewtopic.php?f=65&t=2896


[*] Награды - разделить на аккаунтные и игроковые



[*] Убрать пункт меню "Технологии" - перед этим надо добавить везде ссылки на Новапедию


[*] Доработать админку:
- Круд по планетам
- Круд по юнитам

[*] Пакеты/Бустеры - Личный резерв
- Пакеты/Бустеры - бонусы на скорость производства/исследования в разрезе игрока/планеты
- Бустеры на время - действуют 1-2-3-х часов
- Бустеры одноразовые - получить добычу за Х часов
- !!! Бустеры "по времени" это получаются "Патчи"
- !!! Бустеры на ускорение постройки/ресеча - это Артефакты
- Возможно - на флоты
- Капитан - навык "Использование бустера"


[*] Артефакты
- Сжатие времени - позволяет получить выработку за Х часов на планете/всех планетах

[*] Во всех операциях с планетами пробрасывать номер планеты, для которой это делается
- При изменении активной планеты - выдавать оповещение "Операция заблокирована потому что изменена активная планета и не совпадает с той, на которой поводится изменение"

[*] Добавить в список игроков количество бабла/ММ за всю историю - иконку (?)

[*] Переместить настройки токенов из PLAYER_OPTIONS в отдельную таблицу! Что бы их нельзя было хакнуть

[*] Системы игры:
- Common - общеупотребительные классы, которые могут использоваться отдельно от SN
- Core - Базовая функциональность
- КОГДА ОТКЛЮЧЕНА: игра неработоспособна
- Config - конфигурация игры и модулей
- DBAL - DB Abstraction Layer:
- Предоставляет игре унифицированный интерфейс доступа к БД
- Installer - устанавливает и настраивает игру, а так же конфигурирует начальные параметры
- Updater - обновления БД, манипуляция с данными в БД
- Auth - система авторизации и аутентификации:
- Account - хранит инфромацию об аккаунте
- Авторизирует аккаунты
- Вторичные методы авторизации/аутентификации, связывающие записи во внешних системах с аккаунтом
- Player:
- Хранит базовую информацию об игроке. Привязан к аккаунту
- Репер для привязки количество юнитов Империи (игрока)
- RPG:
- Economic - покупка/продажа юнитов (т.е. постройка, исследование, ЧР итд):
- Dark Matter - подсистема ТМ, добавляющая новый ресурс в игру
= Metamatter - система платной ТМ:
- ИСПОЛЬЗУЕТ: Account - идентификация аккаунта, к которому привязана ММ
- Начисление и списание ММ
- Payments - подсистема, предоставляющая интерфейс платёжных модулей
- Офицеры:
- Император:
- Captains (Капитаны) - Офицер, привязанный к флоту
- Наёмники (Mercenaries) - Офицер, привязанный к Империи
- Губернаторы (Governors) - Офицер, привязанный к планете/луне
- Герой: Офицер, участник Приключения
- Mining - добыча юнитов (ресурсов)
- Universe - организация Вселенной
- Расчёт дистанций между точками Вселенной
- Создание объектов Вселенной: Луны, Планеты, Обломки
- Incident: Управление Происшествиями
- Fleets:
- ИСПОЛЬЗУЕТ: Universe - расчёт дистанций и времени полёта
- ИСПОЛЬЗУЕТСЯ В:
- КОГДА ОТКЛЮЧЕНА: прямой перевод ресурсов между планетами
- составление и отправка флота (взлёт)
- управление флотом в полёте (отзыв)
- выгрузка юнитов на планету
- Удержание
- Группы Флотов
- Mission - подсистема Миссий:
- Рассчитывает результаты взаимодействий флотов в разных контекстах
- UBE - боёвка:
- ИСПОЛЬЗУЕТ: Fleets - информация о флотах и привязанных к ним бонусах
- Расчёт результата столкновений флотов
- Учитывается Удержание
- Учитываются Группы Флотов
- Quest - квесты
- Module - модули в игре:
- ModuleManager - управляет подключением модулей, их статусом итд итп
- Добавляет/изменяет функционал любой другой подсистемы
- Виды:
- Payment
- Player
- Misc
- Core



[*] Избавиться от serialize()/unserialize()
- Заменить по коду:
- unserialize => unserializeOrJsonDecode()
- serialize => json_encode
- В апдейтере физически заменить старые данные на новые

[*] htmlentities() -> HelperString::htmlSafe


[*] Свернуть старые неуниверсальные картинки на 8 марта в универсальные
[*] Вынести константы наград в модуль наград!
[*] Внести константы в классы
[*] Добавить таймштамп в festival_gifts
[*] Фестиваль
- Паззлы
- добавить minLevel, maxLevel к параметрам
- Переписать на использование Аутком-Менеджера
- Gather
- тоже добавить? minLevel, maxLevel
- Переписать на использование Аутком-Менеджера

[*] Награды:
- Отсылать письмо о получении награды - на player_award::award()


[*] Обзор планеты
- Возможность отключить список планет, что бы не светилась активность

[*] Империя
- Добавить обломки на орбите
- Добавить к планетарным иконкам иконку обломков. Раскрашивать в разные цвета


[*] Радужные планеты - планеты, на которых ВСЯ добыча отличная. В них нельзя пережать планеты
- Привязывать продуктивность нестандартных планет к текущим рейтам обмена

[*] Прокачка Капитанов - сделать ограничение на 1% (5%?) от всего флота в бою



[*] Избавиться от sn_function_call()
[*] $manifest['active']->isActive()
[*] убрать SN::$gc->modules->registerModule($class_module_name, $this); из sn_module::__constructor()
[*] flt_page2 - убрать добавление капитана во флот в модуль капитанов
- sn_fleet_page3()


[*] Добавить поле stop_propagation к хукеру. Возможно - к пимпу. Или что бы сама функция сделала stop_propagation и использовала результат из хукера

[*] Токен-лотерея
- Добавить больше инфы на страницу токен лотереи - см. попап


[*] Избавиться от функции messageBox()
[*] Сделать SN контейнером GlobalContainer

#ctv

[*] !!!!!!!!!!!!!!!!!!!!!! Нет константы SN_PAYMENT_ROBOKASSA_RESPONSE_OK !!!!!!!!! Проверить чему она должна быть равна - и добавить
- вообще ошибка в payment_request_process() как минимум в робокассе - не возвращает результат при успешной операции!
- Надо так же проверить остальные модули платежа !!!!!!!!!!!!!!
- Так же проверить мультиреспондеры

[*] Переименовать класс sn_module => Module

[*] Вынести все классы модулей в неймспейсы:
- \Core\Autoloader::register($this->getRootRelative() . '/classes/', 'Modules\player_login_token');

[*] SN::$gc->modules->getModule() - добавить параметр onlyActive = true

[*] Переименовать sn_module->addModuleTemplate - getTemplate

[*] Переименовать DbQuery->SqlQuery (? SqlStringQuery)

[*] Переписать
PlayerStatic::DeleteSelectedUser($UserID)

[*] Купить другому игроку ММ - НЕ ПОДАРИТЬ!

[*] В админке сделать защиту от повторного начисления (!)

[*] https://habr.com/company/cleantalk/blog/354374/ - базовая защита от DDoS и ботов, но с проблемами при AJAX

[*] Убрать таблицу `annonce`

[*] Слить статики для игроков и планет

[*] Разобраться с destruyed - когда ставится и как обрабатывается

[*] Добавить в ActiveRecord свитчер name() - для возвращения имени поля, что бы можно было детектить использование полей по коду в запросах

[*] Опцию stats_hide_player_list переделать, что бы работала с массивами, а не со строками

[*] Модули - проверить, где используется loadVar/saveVar а надо использовать loadArray/saveArray
- Временно. Вообще-то нужно всё переделать на loadVar и использовать там json_encode/json_decode

[*] MoonBot - играть от луны !!!

[*] убрать порнуху в класс (init.php)
- require_once(SN_ROOT_PHYSICAL . 'includes/includes/user_birthday_celebrate.php');
- sn_user_birthday_celebrate();

[*] Разобраться, что там за херня вообще с MVC массивами происходит
- Добавлена опция PAGE_OPTION_ADMIN для обозначения страницы как админской до её загрузки
- Разобраться - куда добавили
- Переделать все страницы на её использование
- Убрать константу IN_ADMIN
- 'model'+FIELD_MODEL => MVC_MODEL
- 'view'+FIELD_VIEW => MVC_VIEW

[*] UNIX_TIMESTAMP(NOW()) - заменить на UNIX_TIMESTAMP()

[*] !!!!!!!!!!!! Декораторы |num|format не работают на простых переменных {BLACK_MOONS_COUNT|num|format} ! Но работают на блочных {bracket.BLACK_MOONS_COUNT|num|format}


[*] Включить E_NOTICE и отловить все баги - сделать хэндлер, который будет выбивать ошибку (?) или включить в конфиге ПХПы

[*] Размещать луны не ВНУТРИ кластера, а ЗА ПРЕДЕЛАМИ кластера!
- Особый случай если луна одна

[*] core_auth - НЕ МОДУЛЬ!

[*] sn_module - наследник pimple

[*] убрать _checkStatus

[*] http://php.net/manual/en/function.password-hash.php
- http://php.net/manual/en/function.password-verify.php

[*] Главный Инженер - увеличивает ёмкость слота построек. Наёмник (?) +100, +200 итд

[*] Пересчитать скорости транспортов - уж очень резво они летают

[*] На столице - удваивать и скорость производства юнитов, защиты, зданий


[*] За X баксов-то вложенных в игру можно и сделать. Лояльность и ЧСВ игрока поднимет
- 4.03.2018 02:24:45   Сингулярность [1:2:12]   RE:Новое сообщение
Мы тут посовещались - и решили по такому случаю ввести специальную награду - медаль "Первый Участник Краудфандинга". Это может занять немного времени для добавления в код - но у тебя она точно есть!
- Для себя - можно награждать только тех, кто пожертвовал первые 100 баксов, скажем. Подумать

[*] Модуль балансера с дампами всего, что хочется в админке admin_balance


[*] Объединить все локализации в один файл. Уже прошли времена, когда надо было экономить байты памяти

[*] Проверить год начала использования модуля, что бы обновить копирайт


[*] Добавить в Новапедию:
- Максимальную дальность полёта на стандартных и текущих техах в Дистансах, Галактиках и Вселенных
- Расход топлива на стандартный полёт из Галактики в Галактику на стандартных и текущих техах
- Время полёта из Г в Г на стандартных и текущих техах

[*] В чате сворачивать http://ogame.supernova.ws/ > sn://

[*] Спецагент/Агент - шпион/разведчик/контр-разведчик
- Спецздание - КБУ - Комитет Безопасности (Безопасного?) Управления - найм и прокачка Агентов
- Скиллы:
- Разведка/Шпионаж
- Диверсия - действие наносящий физический урон (подрыв и т. д)
- Саботаж - невыполнение работы, указаний
- Контр-разведка


#ctv


[*] !!!!!!! Проверять корректную работу Фестивалей при каждом новом Хайспоте и добавлять отметки тут


Добавить в сообщение об ошибках при переименовании игрока причины отказа:
- Переименование отключено
- Пустое имя
- Запрещенные символы

Включить bbCode в сообщениях всем игрокам

//    // Replacing news://xxx link with BBCode
//    $message = preg_replace("#news\:\/\/(\d+)#", "[news=$1]", $message);
//    // Replacing news URL with BBCode
//    $message = preg_replace("#(?:https?\:\/\/(?:.+)?\/announce\.php\?id\=(\d+))#", "[news=$1]", $message);
//    $message = preg_replace("#(?:https?\:\/\/(?:.+)?\/index\.php\?page\=battle_report\&cypher\=([0-9a-zA-Z]{32}))#", "[ube=$1]", $message);

    $message = SN::$gc->bbCodeParser->compactBbCode($message, $user['authlevel']);


Длина поля в темплейте обрезает hide_stat_players


[*] Добавить корректную работу неизвестных юнитов по контексту:
- Приземление неизвестных кораблей
- Исследование неизвестных технологий
- Постройка неизвестных кораблей



[*] Fleet.php
// TODO - Those two lines should be removed - fleet times should be filtered on interface side
$this->timeArrive = SN_TIME_NOW;
!empty($this->timeEndStay) ? $this->timeEndStay = SN_TIME_NOW : false;



#ctv


Подключить MissionExplore
Прибавлять количество экспоочков в зависимости от часов (?)
Экспа-квазар: потерять часть (?) флота и привезти больше ТМ

[~] Флоты/Экспедиции
Теперь в Экспедиции могут быть найдены и корабли, которые не входят в состав флота
Теперь в Экспедиции не может быть найден самый дорогой корабль во флоте

[*] Страничка "Ресурсы" - вставить такой же контрол, как и на Обзоре с ценой в ТМ в дропдауне


[*] Продвинутые фишки флотов:
- UnReturn - отменить возврат флота (если флот еще не прибыл)
- QuickReturn - всегда возврат по затраченному времени полёта, а не по timeArrive - после того, как будет сделан возврат по timeArrive
- NoHoldReturn

[*] Забор крови. Забор - существительное

/** @noinspection PhpUnhandledExceptionInspection */
/** @noinspection SqlResolve */


::fleet_insert_set_dbq - все три вызова нужно объединить в один
OldDbChangeSet::db_changeset_apply - а от этого вообще избавиться

#zebra
.logDbWrapper > :nth-child(even)
{
background-color: #EEEEEE;
line-height: 1.5em;
}

        .logDbWrapper > :nth-child(odd).critical
        {
          background-color: #e69539;
        }
        .logDbWrapper > :nth-child(even).critical
        {
          background-color: #ff8c00;
        }
        .logDbWrapper > :nth-child(odd).error
        {
          background-color: #FFDDDD;
        }
        .logDbWrapper > :nth-child(even).error
        {
          background-color: #EEBBBB;
        }
        .logDbWrapper > :nth-child(odd).warning
        {
          background-color: #ffffa0;
        }
        .logDbWrapper > :nth-child(even).warning
        {
          background-color: #d9d96c;
        }

Сделать Артефактов и находить их в Экспе или Лотереях:
- Смена ядра
- Смена температуры (несколько градаций)


Проект Антарес - развитие проекта Орион - корабль на термоядерных бобмах

[*] Софт-ресет ака Престиж
-
- Дебафф "Decay" - "Увядание"
- При слишком долгой игре без софт-ресета вешается дебафф, который влияет на все аспекты игра игрока
- Дебафф может быть снят софт-ресетом


https://aftershock.news/?q=node/701115


    /**
     * Return IP address
     *
     * @return mixed
     */
    public static function ipGet()
    {
        $realIp = self::ipGetForwarded();

        return empty($realIp) ? $_SERVER['REMOTE_ADDR'] : $realIp;
    }

    /**
     * @return string
     */
    protected static function ipGetForwarded()
    {
        $realIp = '';

        if (empty($_SERVER['HTTP_X_FORWARDED_FOR'])) {
            return $realIp;
        }

        $finalIp = trim($_SERVER['REMOTE_ADDR']);

        $proxyChain = explode(',', $_SERVER['HTTP_X_FORWARDED_FOR']);
        array_walk($proxyChain, 'trim');

        foreach ($proxyChain as $proxyAddress) {
            // Checking if IP address is not local or reserved for internal networks
            // Also if IP is like in REMOTE_ADDR - ignoring this too. It's not our case
            if ($proxyAddress != $finalIp && self::ipIsGlobal($proxyAddress)) {
                $realIp = $proxyAddress;
                break;
            }
        }

        return $realIp;
    }

    /**
     * @param string $ip
     *
     * @return bool
     */
    public static function ipIsGlobal($ip)
    {
        return
            filter_var(
                $ip,
                FILTER_VALIDATE_IP,
                FILTER_FLAG_NO_PRIV_RANGE | FILTER_FLAG_NO_RES_RANGE // FILTER_FLAG_IPV4 |
            ) !== false;
    }














[*] Добавить запрос в код
SELECT
payment_user_id, u.username, FROM_UNIXTIME(u.register_time) as reg_date, min(payment_date) as first_pay, max(payment_date) as last_pay,
FORMAT((UNIX_TIMESTAMP(min(payment_date)) - (u.register_time))/60/60/24,3) as days_first_pay,
FORMAT((UNIX_TIMESTAMP(now()) - UNIX_TIMESTAMP(max(payment_date)))/60/60/24,3) as days_last_pay,
format(sum(if(payment_currency = 'UAH', payment_amount/11,payment_amount)), 2) as payment_sum
FROM `game_payment` as p
join game_users as u on u.id = p.payment_user_id
where payment_status = 1
group by payment_user_id
order by u.register_time;
[*] Проапдейдить таблицу платежей - перебить все платежи в USD по курсу



[*] Переделать расчёт бонусов Альянса
- Масштабировать бонусы в зависимости от количества игроков в Альянсе и прописанного минимума линейно.
- Для 7 минимума и 3 игроков бонусы будут floor(3/7 * уровень)


[*] БД
- Дропнуть sn_annonce - не перепутать!
- sn_iraks => sn_fleet
- Дропнуть sn_log_halloween_2015


[*] Холод Вершины - для алла
- Дебаф на алл/игрока за занимание первого места
- Одиночество на пике - для игрока


[24.11.2018 22:47:56] taych[NewSTAR]>по поводу рекрутинга. а нельзя придумать что по поводу принятия в альянсы..например доску обьявлений по приёму или вступления.по клику просто мышкой.
[24.11.2018 23:02:55] Сингулярность[БАС]>Хотя идея со списком Альянсов, открытых для приёма - в принципе хорошая

[*] Удержание
Можно. Тут прикол в чем. У меня полет на него около трех суток. Если уйти в РО, то можно только повернуть назад. Итого 6 суток. Т.е. неделю продержать не получается. Я придумал по другому. Я долетаю. Переработчики разбиваются. Это уже когда противник в РО. И я шлю рабов на обломки. А потом еще и заворачиваю. Короче, там до полутора, а то и двух недель можно довести
Прошлый раз Спрут на этом и прокололся. Вышел из РО - а привязки все еще есть
Он очень хочет упрыгнуть из 11-13
Ну а сейчас они тоже на вооружение взяли эту тактику. Меня держать по 800-900 часов в одну сторону. То есть уже и РО не спасет. И стоит мне пропустить выход Спрута, а я не могу все время не спать - он упрыгнет, а я уже никуда не денусь


[*] Атаки
Ввести настраиваемый минимальный промежуток между атаками (и/или между отправкой флотов?)



{function timerDump timer=[]}
<table>
<tr>
<th>Message</th>
<th>Length</th>
<th>From start</th>
<th>Location</th>
</tr>
{foreach from=$timer key=key item=timestamp}
{if $key}
<tr>
<td>{$timestamp['message']}</td>
<td>{$timestamp['time']-$timer[$key-1]['time']|round:5}</td>
<td>{$timestamp['time']-$timer[0]['time']|round:5}</td>
<td>{$timestamp['location']}</td>
</tr>
{/if}
{/foreach}
</table>
{/function}
{call timerDump timer=$timer}
'timer' => Timer::getLog(),



game_counter
I_counter_device_id	(device_id, user_id)


Первый - пошел
Parviz - бан. Ботоводство. Хозяину бота - (очень сильное подозрение на ailouros ) первое и последнее предупреждение
Альянсу Proxima Prime - первое предупреждение
Второй - пошел!
auro007 - Ботоводство
Альянсу Про - второе предупреждение

[*] ? Бонус к добыче при потере большого процента флота

[*] Страница Альянса - добавить список игроков
[*] Статистика - добавить фильтр по Альянсам и, возможно, статусам

[*] Лог отпусков

[*] В "Поиске" игрока и "Списке игроков" - вывешивать полные регалии на нике

#ctv

[*] Пофиксить
$multiplier = 5; // $this->valueStorage->getValue(UNIT_SERVER_FLEET_NOOB_FACTOR);
class PlayerLevelHelper::calcLevels()

[*] JSON!!!!
- SN::$user_options[PLAYER_OPTION_MENU_SORT] = serialize($this->menu_reorder($menuOrderNew));


!!!!!!!!!!!!! Писать в таблицу counter параметры GET запроса в отдельную колонку


[22.12.2018 20:34:02] Сингулярность[БАС]>Это новая фишка в игру добавлена
[22.12.2018 20:34:12] Сингулярность[БАС]>Дальше будет использоваться, само собой
[22.12.2018 20:34:17] Сингулярность[БАС]>Коды могут быть везде
[22.12.2018 20:34:42] Сингулярность[БАС]>На форуме. В чате. В новостях
[22.12.2018 20:34:54] Сингулярность[БАС]>Планирую загадки с охотой за кодами
[22.12.2018 20:35:37] Сингулярность[БАС]>Вот сейчас прикидываю, какой можно интересный кодоквест замутить со ступенчатыми кодами.


В чате заменить ДИВ на СПАН, что бы при копировании было сообщение в одну строку

Экспа - дорогие полёты (по дейтерию), но убрать потери флота

[*] Контроль территории Альянса
[06.04.2019 17:41:11]ForMe[♨️RED♨️]>бонусы*
[06.04.2019 18:41:44]Lexus>спасибо, а в какой стоит проситься ? или в какой не стоит ? )))
[06.04.2019 19:46:48]ForMe[♨️RED♨️]>В какой хочешь) Но вряд ли тебя возьмут в тот, где ровно 7 человек, ибо столько необходимо для активации бонуса
[06.04.2019 19:47:07]ForMe[♨️RED♨️]>Но чем больше людей в альянсе - тем меньше бонус начисляется его участникам
[06.04.2019 19:48:11]ForMe[♨️RED♨️]>А следовательно, в альянс состоящий из 7 человек, где каждый получает максимум(из возможного) бонусов, тебя не возьмут
[06.04.2019 19:48:23]ForMe[♨️RED♨️]>Не выгодно (:
[06.04.2019 19:48:46]ForMe[♨️RED♨️]>Но есть альянсы, где больше людей - там на бонус чуток подзабили
[06.04.2019 20:07:21]Lexus>а кроме бонусов и ресурсов чтото ещё есть ?
[06.04.2019 20:08:03]Lexus>я про альянсы ? может там захват территорий и порабощение всего ))))
[06.04.2019 20:18:20]taych[NewSTAR]>(ForMe[♨️RED♨️]) на счёт позабили-не совсем так...........................
[06.04.2019 23:43:06]ForMe[♨️RED♨️]>(taych[NewSTAR])Ну, больше людей - больше веселья, но бонусов то меньше всё равно
[06.04.2019 23:44:55]ForMe[♨️RED♨️]>(Lexus)Ну, существует определенное количество атак в день на планету, а альянсы могут объявлять друг другу войну
[06.04.2019 23:45:39]ForMe[♨️RED♨️]>И против врагов альянса можно нападать сколько угодно)
[06.04.2019 23:46:04]ForMe[♨️RED♨️]>(Lexus)Слева в меню есть вкладка "О сервере", в самом низу
[06.04.2019 23:46:13]ForMe[♨️RED♨️]>Там ознакомься с некоторой информацией
[06.04.2019 23:46:30]ForMe[♨️RED♨️]>А слева наверху, на самом, есть вкладка "Как играть?"
[06.04.2019 23:46:36]ForMe[♨️RED♨️]>С ней тоже следовало бы ознакомиться (:
[07.04.2019 03:45:45]taych[NewSTAR]>думаю-зажигание уже пожно включать.....по моимприлежным наблюдениям администрация становиться по чуть чуть скуповатой.рейты добовляет по нескольку десятых..штоб ишемии не было
[07.04.2019 03:51:45]taych[NewSTAR]>у мну на прошлый день космонавтики 11 числа на металле в час влетало 4.7 млд металла.чёт не записал 12 ое.наверное замотался распихивать такое сакровищще
[07.04.2019 03:52:45]taych[NewSTAR]>ЛЮДИ!СТРОЙТЕ ТРАНСПОРТЫ!ЧТО БЫ ПОТОМ НЕ СХОДИТЬ С УМА!
[07.04.2019 06:18:11]семм[™]>гагаринка зажгися
[07.04.2019 07:16:19]Sprut[™]>Наверное опять кто-то в ракете лишнюю дырку просверлил- пуск откладывается, замазка кончилась...
[07.04.2019 07:28:52]Sprut[™]>Есть у кого-нибудь жвачка или скотч- дырку в союзе залепить?
[07.04.2019 07:53:34]taych[NewSTAR]>Олим ещё отдыхает
[07.04.2019 07:53:45]taych[NewSTAR]>Олимп
[07.04.2019 09:40:46]семм[™]>(taych[NewSTAR])
[07.04.2019 11:45:08]Sprut[™]>(семм[™]) залепи дырку и полетели...
[07.04.2019 11:48:10]Sprut[™]>(семм[™])огурца посадил, ключ на старт!
[07.04.2019 12:32:27]семм[™]>отсчет пошол адын, дыва, тиры-поехалиии!!!!!
[07.04.2019 13:40:00]Man in red[Феникс]>(Sprut[™])Ану домой руки мыть и кушать , играется он тут с едой
[07.04.2019 13:41:08]Sprut[™]>(семм[™]) чих- пых, чих-пых, не заводится
[07.04.2019 13:42:54]Sprut[™]>(Man in red[Феникс]) так это ты дырку в ракете просверлил?
[07.04.2019 13:47:27]Man in red[Феникс]>(Sprut[™])для того она и дырочка
[07.04.2019 13:49:27]Sprut[™]>(Man in red[Феникс]) вот негодяй!
[07.04.2019 13:53:43]Sprut[™]>Все, доигрались- Гагарин отказался лететь из-за деверсии и отсутствия скотча
Ну, посмотрим. Я со счетов ОвК не скидываю. Что-нибудь да придумаю. Может по кусочкам в игру внесу. Может по более мелким, но частым ивентам растащу.
Надо сесть и подумать. И посчитать - самое главное. По одному кораблику изредка пускать - это проще, чем сразу пол-дюжины. И нет вариантов что строить - т.е. можно легче посчитать последствия. И следить потом за балансом проще. И наиболее одиозные кораблики (кха-спутники-кхх) можно исключить.



"Уники"
- Юниты с уникальными характеристиками, которые можно приаттачить куда-нибудь: к игроку, планете, флоту, луне

Анти-РМФ - убедиться, что никто, кроме владельца планеты, не получает инфу о бое за 1 раунд

Выборы Императора Сервера

Миниигра: собирать отряд Героев и отправлять их в суперэкспы
- Лутер: сходить в экспу, набить чего-то, повторить.
- Приключения вместо эксп


https://aftershock.news/?q=node/752122


[*] Игровая система помощи



[*] Раса-7. "Разнообразие" (?), "Отверженные" (?), "Скитальцы"/"Странники" (?)
- .7race.txt


[*] TOR - Tactic, Operation, Resources
ТОР - Тактика, Операции, Ресурсы
Аттрибуты:
- Удача - только на себя
- Неудача - на всех в бою

[*] ТуДу
- Пофиксить баги
- Переехать под CentOS 7/PHP 7
- Виртуальная машина
- Скрипт установки
- Платежные системы
- Перевести игру на новый айпишник
- ВебМани
- Интеркасса
- ПейПал (?)
- ЯндексБабло
- Договр с иксоллой
- Авторизация через внешние источники
- Гугль
- Доделать вконтакт
- ВК
- ОК
- Боты
- Пираты в экспе
- Сторящий бот
- Раса-7
- Распотрошить ОвК
- Новый темплейт
- Вернуть ЯД-Метрику
- http://tods-blog.com.ua/statistics/metrika-ukraine/
- Самонастраивающееся меню
- Система помощи
- Ачивки
- Квесты
- Интеграция с форумом
- Jira/Trello
- Запуск сервера на английском
- Перевод на Английский

[*] Починить редактирование планет - модуль admin_planet_edit


!!!!!!!!!!!!!
[*] Добавить штраф +10% за счёт каждого следующего флота
- game_noob_factor

[*] Сделать разрешение на обратную атаку
- Не давать уходить в отпуск на это время
- Так же проверять вылетающие флоты в отпуск


#ctv

[*] Переработать маинтенанс таблиц безопасности
[*] Переделать запись SQL-запросов в лог:
- debug_backtrace() должен выполнятся при записи ошибочного запроса ? Проверить - будет ли он работать так при вызове в хандлере ошибок и/или хандлере окончания операции
- Писать без <br/> - в сыром виде
- Переделать вывод логов с учётом этого

!!! Конвертировать артефакты за ТМ


!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! О! Надо сделать запоминания прошлой системы платежей!
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!

!!!!!!!! НЕ НАЧИСЛЯТЬ ТМ в ивентах тем, кто в отпуске и/или забанен и/или неактивен!

!!!!!!!! При логине/регистрации кнопка "Показать пароль" не меняет содержание на "Скрыть пароль" после нажатия и показа пароля


!!!!!!!!!!!! Исправить - заодно переделать на <span>
[15.08.2019 23:12:05]
Sandra
>
а... теперь и zz увидела
[15.08.2019 23:13:25]
Sandra
>
а когда в чате поднимаешься наверх - опять вниз сбрасывает
[15.08.2019 23:14:43]
Sandra
>
неудобно - нужные строки меню(слева) сложно поймать
[15.08.2019 23:16:05]
Sandra
>
я не в приложении, а в браузере с телефона играю


[*] <input type="text" placeholder="Enter your user name">



#ctv



[*] Иконки для платёжных систем
Картинка билайна
Картинка applepay

[*] UnitPay
Добавить PayPal
Добавить ApplePay


!!!!!!!!!!! Протестировать все методы прямой оплаты у агрегаторов !
- Интеркасса
+ PAYMENT_METHOD_MOBILE_MTS       => 'mts_mpay_merchantContent_rub',
+ PAYMENT_METHOD_MOBILE_MEGAPHONE => 'megafon_mpay_merchantContent_rub',
+ PAYMENT_METHOD_MOBILE_BEELINE   => 'beeline_mpay_merchantContent_rub',
+ PAYMENT_METHOD_EMONEY_QIWI      => 'qiwi_qiwi_wallet2wallet_rub',
+ PAYMENT_METHOD_EMONEY_YANDEX    => 'yandexmoney_yandexmoney_merchant_rub',
- Остальные?

Так, с валютами разобраться. Например:
WebMoneyZ считает в WMZ
Но юнитпей принимает только рубли
И при этом предлагает сумму в баксах
Но игроку надо показать сумму в WMZ


Кэшировать реальную стоимость оплат по провайдерам или брать из таблицы payments

[*] Переделать PaymentMethods::$payment_methods - разбить и юзать?


[*] При РМФ не отсылать флоты - сделать опцию

#page>div.logo+ul#navigation>li*5>a{Item $$$}


[*] adm_user_stat - кажется, не нужен? Это, кажется, модуль?

[*] В модулях позаменять design/templates - там они всё равно неправильно используются

[*] Убрать <!-- INCLUDE page_hint -->

[*] Убрать gettemplate из основного кода - параметры передавать через $template_result
- assign_block_vars




!!!!! В настройках игрока при сохранении опять дублируется сообщение в хидере


!!! Отключить поддержку вертикальных ресурсбаров в виде таблицы - и сделать недоступным соответствующую комбинаци опций
- Может переделать старый ресурсбар в виде флекса?

https://ourcodeworld.com/articles/read/674/top-7-best-php-http-client-libraries

#ctv


[*] going for sass/scss compass sass http://compass-style.org/
[*] gradle -> npm


[*] Интересный факт : если выбрать какую-то постройку, исследование или юнита, а затем навести мышь на другого и не выбирать его, а просто кликнуть "+", то в очередь попадет та, которая была выбрана, а не та, на которую был клик

В чате на тесте писали по поводу прыгающего чата на телефоне. Так вот это происходит если после нажатия на строку ввода (и появления клавиатуры) начать листать страницу чата. Каждые 2-3 секунды экран перекидывает на строку ввода.
Телефон, браузер хром.

(Chaka[NewSTAR])Ну, оно так и было раньше вообще-то. Список планет на экране был. Другой вопрос, что надо подумать - может добавить в "Настройках" отключение списка планет для мобильщиков


<VirtualHost *:80>
ServerName c7.local
DocumentRoot /var/www/c7.local

    <IfModule mpm_event_module>
        ProxyPassMatch ^/(.*\.php(/.*)?)$ fcgi://127.0.0.1:9000/var/www/c7.local/$1
    </IfModule>

    <Directory "/var/www/c7.local/">
        DirectoryIndex index.php index.html index.htm
    </Directory>

    ErrorLog /var/log/httpd/error.log
    TransferLog /var/log/httpd/access.log
</VirtualHost>

https://phpdelusions.net/pdo/fetch_modes#FETCH_LAZY


#ctv


[*] !!!!!!! Добавить оповещение об атаке в правом нижнем углу как position absolute?
- Туда же - оповещение о новых сообщениях от игроков
- Настройки как это показывать

!!!!!!!!!!!!!!!!!!!!!!!!!!!!
Сделать ежедневное обновление времени просчёта для игроков, которые давно оффлайн


see .___logs.txt

https://stackoverflow.com/questions/14359926/send-http-request-from-php-without-waiting-for-response
https://stackoverflow.com/questions/124462/how-to-make-asynchronous-http-requests-in-php?noredirect=1&lq=1
In my testing, using exec("curl $url > /dev/null 2>&1 &"); is one of the fastest solutions here. It's immensely faster (1.9s for 100 iterations) than the post_without_wait() function (14.8s) in the "accepted" answer above. AND it's a one-liner... – rinogo Jan 28 '16 at 20:29
https://stackoverflow.com/questions/1019867/is-there-a-way-to-use-shell-exec-without-waiting-for-the-command-to-complete?noredirect=1&lq=1
